version: v1
id: gcp-dataflow
label: GCP Dataflow
description: "GCP Dataflow Saagie implementation"
available: true
type: EXTERNAL_JOB
icon: job

contexts:
  - id: mycontext
    label: MyContext
    description: ""
    recommended: true
    trustLevel: experimental
    endpoint:
      features:
        - type: URL
          name: url
          label: End point URL
          required: true
          helper: "eg https://dataflow.googleapis.com"
        - type: PASSWORD
          name: GCP TOKEN
          label: GCP Token
          required: true
        - type: TEXT
          name: region
          label: Region
          helper: "GCP region example: europe-west2"
          required: false
    
    job:
      features:
        - type: TEXT
          name: project_id
          label: "Project ID"
          required: true
        - type: TEXT
          name: job_id
          label: "Job ID"
          required: true
        - type: TEXT
          name: jsonKey
          label: "GCP jsonKey"
          required: true
          
    instance:
      actions:
        onStart:
          script: ./instanceActions.js
          function: start
        onStop:
          script: ./instanceActions.js
          function: stop
        getStatus:
          script: ./instanceActions.js
          function: getStatus
        getLogs:
          script: ./instanceActions.js
          function: getLogs